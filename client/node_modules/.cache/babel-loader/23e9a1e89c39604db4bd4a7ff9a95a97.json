{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/Components/SecondPage/SecondPage.js\";\nimport React, { Component } from 'react';\nimport Driver from './Driver/Driver';\nimport ls from 'local-storage';\nimport './SecondPage.css';\nimport JourneyDetails from './JourneyDetails/JourneyDetails';\nimport CarDetails from './CarDetails/CarDetails';\nimport Grid from '@material-ui/core/Grid';\nimport { Redirect } from 'react-router-dom'; // import img from '../../../matthew.png';\n\nclass DriverType extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getDriverDeets = async () => {\n      const driverDeets = await fetch('/api/driver-deets');\n      const body = await driverDeets.json();\n      if (driverDeets.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    this.confirmBookingHandler = index => {\n      const drivers = this.state.drivers;\n      ls.set('confirmedDriver', drivers[index]);\n      this.props.history.push('/final-page');\n    };\n\n    const token = ls.get('token');\n    let loggedIn = true;\n    token === null ? loggedIn = false : loggedIn = true;\n    this.state = {\n      rideType: '',\n      origin: '',\n      destination: '',\n      latLng: null,\n      date: '',\n      drivers: [],\n      price: null,\n      loggedIn\n    };\n  }\n\n  componentDidMount() {\n    this.getDriverDeets().then(res => {\n      res.map(driver => {\n        driver.price = driver.priceMod * ls.get('distance');\n        return true;\n      });\n      this.setState({\n        drivers: [...res]\n      });\n      ls.set('drivers', this.state.drivers);\n    }).catch(err => console.log(err));\n  }\n\n  nextPath(path) {\n    this.props.history.push(path);\n  }\n\n  render() {\n    if (this.state.loggedIn === false) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.nextPath('/'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, \"Journey Details\"), /*#__PURE__*/React.createElement(JourneyDetails, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, \"Your car details\"), /*#__PURE__*/React.createElement(CarDetails, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 16\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 16\n      }\n    }, \"Select your driver-partner\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"three\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 16\n      }\n    }, this.state.drivers.map((driver, index) => {\n      return /*#__PURE__*/React.createElement(Driver, {\n        key: index,\n        name: driver.name,\n        info: driver.pricePerKM,\n        price: driver.price,\n        etc: driver.lingo,\n        click: () => this.confirmBookingHandler(index),\n        displayButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      });\n    })));\n  }\n\n}\n\nexport default DriverType;","map":{"version":3,"sources":["/usr/src/app/src/Components/SecondPage/SecondPage.js"],"names":["React","Component","Driver","ls","JourneyDetails","CarDetails","Grid","Redirect","DriverType","constructor","props","getDriverDeets","driverDeets","fetch","body","json","status","Error","message","confirmBookingHandler","index","drivers","state","set","history","push","token","get","loggedIn","rideType","origin","destination","latLng","date","price","componentDidMount","then","res","map","driver","priceMod","setState","catch","err","console","log","nextPath","path","render","name","pricePerKM","lingo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Driver from './Driver/Driver';\nimport ls from 'local-storage';\nimport './SecondPage.css';\nimport JourneyDetails from './JourneyDetails/JourneyDetails';\nimport CarDetails from './CarDetails/CarDetails';\nimport Grid from '@material-ui/core/Grid';\nimport { Redirect } from 'react-router-dom';\n\n// import img from '../../../matthew.png';\nclass DriverType extends Component {\n\n    constructor(props) {\n        super(props);\n\n        const token = ls.get('token');\n        let loggedIn = true;\n        token === null ? loggedIn = false : loggedIn = true;\n\n        this.state = {\n            rideType: '',\n            origin: '',\n            destination: '',\n            latLng: null,\n            date:'',\n            drivers: [],\n            price: null,\n            loggedIn\n          };\n    }\n\n    componentDidMount() {\n        this.getDriverDeets()\n            .then(res => {\n            res.map(driver => {\n                driver.price = driver.priceMod * ls.get('distance');\n                return true;\n            });\n            this.setState({drivers:[...res]});\n            ls.set('drivers', this.state.drivers);\n            })\n            .catch(err => console.log(err));\n    }\n\n    getDriverDeets = async () => {\n        const driverDeets = await fetch('/api/driver-deets');\n        const body = await driverDeets.json();\n        if (driverDeets.status !== 200) throw Error(body.message);\n        \n        return body;\n    };\n\n    confirmBookingHandler = (index) => {\n        const drivers = this.state.drivers;\n        ls.set('confirmedDriver', drivers[index])\n        this.props.history.push('/final-page');\n    }\n\n    nextPath(path) {\n        this.props.history.push(path);\n    }   \n\n    render() {\n\n        if(this.state.loggedIn === false) {\n            return <Redirect to=\"/login\"/>\n          }\n\n        return (\n            <div>\n                <button onClick={ () => this.nextPath('/') }>Back</button>\n                <br/>\n                <Grid container>\n                    <Grid item xs={6}>\n                        <h2>Journey Details</h2>\n                        <JourneyDetails />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <h2>Your car details</h2>\n                        <CarDetails/>\n                    </Grid>\n                </Grid>\n               \n               <br />\n               <h2>Select your driver-partner</h2>\n               <div className=\"three\">\n               { this.state.drivers.map( (driver, index) => {\n                   return(\n                    <Driver \n                    key={index}\n                    name={driver.name}\n                    info={driver.pricePerKM}\n                    price={driver.price}\n                    etc={driver.lingo}\n                    click={() => this.confirmBookingHandler(index)}\n                    displayButton={true}\n               />\n                   );\n               }) }\n               </div>\n            </div>\n        );\n    }\n}\n\nexport default DriverType;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/Components/FinalPage/FinalPage.js\";\nimport React, { Component } from 'react';\nimport ls from 'local-storage';\nimport TextField from '@material-ui/core/TextField';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport img from './trip.jpg';\nimport Driver from '../SecondPage/Driver/Driver';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport { Redirect } from 'react-router-dom';\nconst useStyles = {\n  root: {\n    maxWidth: 600,\n    margin: 'auto'\n  },\n  media: {\n    height: 200,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    marginLeft: 'auto',\n    marginRight: 10\n  },\n  avatar: {\n    backgroundColor: red[500]\n  }\n};\nexport default class FinalPage extends Component {\n  constructor(props) {\n    super(props);\n    const token = ls.get('token');\n    let loggedIn = true;\n    token === null ? loggedIn = false : loggedIn = true;\n    this.state = {\n      confirmedDriver: null,\n      loggedIn\n    };\n  }\n\n  paymentHandler() {\n    // e.preventDefault();\n    const payment_amount = ls.get('confirmedDriver').price;\n    const self = this;\n    const options = {\n      key: process.env.REACT_APP_RZP_KEY,\n      amount: payment_amount * 100,\n      name: 'Car For U',\n      description: 'Book your car by paying below',\n\n      handler(response) {\n        const paymentId = response.razorpay_payment_id;\n        alert('You booking id is ' + paymentId);\n        const url = process.env.URL + '/api/v1/rzp_capture/' + paymentId + '/' + payment_amount; // Using my server endpoints to capture the payment\n\n        fetch(url, {\n          method: 'get',\n          headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n          }\n        }).then(resp => resp.json()).then(function (data) {\n          console.log('Request succeeded with JSON response', data);\n          self.setState({\n            refund_id: response.razorpay_payment_id\n          });\n        }).catch(function (error) {\n          console.log('Request failed', error);\n        });\n      },\n\n      prefill: {\n        name: 'Aneesh Melkot',\n        email: ''\n      },\n      notes: {\n        address: 'Bangalore, India'\n      },\n      theme: {\n        color: '#1565C0'\n      }\n    };\n    const rzp1 = new window.Razorpay(options);\n    rzp1.open();\n  }\n\n  render() {\n    if (this.state.loggedIn === false) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      style: useStyles.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      action: null,\n      title: ls.get('destination'),\n      subheader: ls.get('journeyDate'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardMedia, {\n      style: useStyles.media,\n      image: img,\n      title: \"trip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      margin: \"normal\" // onChange={this.onChange}\n      ,\n      label: \"Pickup Address\",\n      id: \"outlined-size-normal\" // defaultValue={this.state.userName}\n      ,\n      variant: \"outlined\",\n      name: \"address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"You driver-partner details\"), /*#__PURE__*/React.createElement(Driver, {\n      name: ls.get('confirmedDriver').name,\n      info: ls.get('confirmedDriver').pricePerKM,\n      price: ls.get('confirmedDriver').price,\n      etc: ls.get('confirmedDriver').lingo,\n      displayButton: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(CardActions, {\n      disableSpacing: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"add to favorites\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"share\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ShareIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.paymentHandler,\n      style: useStyles.expand,\n      size: \"large\",\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, \"Confirm and Book\")))));\n  }\n\n}","map":{"version":3,"sources":["/usr/src/app/src/Components/FinalPage/FinalPage.js"],"names":["React","Component","ls","TextField","Card","CardHeader","CardMedia","CardContent","CardActions","IconButton","Typography","red","FavoriteIcon","ShareIcon","img","Driver","Button","Container","Redirect","useStyles","root","maxWidth","margin","media","height","paddingTop","expand","marginLeft","marginRight","avatar","backgroundColor","FinalPage","constructor","props","token","get","loggedIn","state","confirmedDriver","paymentHandler","payment_amount","price","self","options","key","process","env","REACT_APP_RZP_KEY","amount","name","description","handler","response","paymentId","razorpay_payment_id","alert","url","URL","fetch","method","headers","then","resp","json","data","console","log","setState","refund_id","catch","error","prefill","email","notes","address","theme","color","rzp1","window","Razorpay","open","render","pricePerKM","lingo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ls from 'local-storage';\nimport TextField from '@material-ui/core/TextField';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport img from './trip.jpg';\nimport Driver from '../SecondPage/Driver/Driver';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport { Redirect } from 'react-router-dom';\n\nconst useStyles = {\n    root: {\n      maxWidth: 600,\n      margin: 'auto'\n    },\n    media: {\n      height: 200,\n      paddingTop: '56.25%', // 16:9\n    },\n    expand: {\n      marginLeft: 'auto',\n      marginRight:10\n    },\n    avatar: {\n      backgroundColor: red[500],\n    },\n  };\n\n \nexport default class FinalPage extends Component{\n\n  constructor(props) {\n    super(props);\n\n    const token = ls.get('token');\n        let loggedIn = true;\n        token === null ? loggedIn = false : loggedIn = true;\n\n    this.state = {\n      confirmedDriver: null,\n      loggedIn\n    };\n  \n  }\n\n  \n  paymentHandler() {\n    // e.preventDefault();\n\n    const payment_amount = ls.get('confirmedDriver').price;\n    const self = this;\n    const options = {\n        key: process.env.REACT_APP_RZP_KEY,\n        amount: payment_amount*100,\n        name: 'Car For U',\n        description: 'Book your car by paying below',\n\n        handler(response) {\n        const paymentId = response.razorpay_payment_id;\n        alert('You booking id is ' + paymentId);\n        const url = process.env.URL+'/api/v1/rzp_capture/'+paymentId+'/'+payment_amount;\n        // Using my server endpoints to capture the payment\n        fetch(url, {\n            method: 'get',\n            headers: {\n            \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\"\n            }\n        })\n        .then(resp =>  resp.json())\n        .then(function (data) {\n            console.log('Request succeeded with JSON response', data);\n            self.setState({\n            refund_id: response.razorpay_payment_id\n            });\n        })\n        .catch(function (error) {\n            console.log('Request failed', error);\n        });\n        },\n\n        prefill: {\n        name: 'Aneesh Melkot',\n        email: '',\n        },\n        notes: {\n        address: 'Bangalore, India',\n        },\n        theme: {\n        color: '#1565C0',\n        },\n    };\n    const rzp1 = new window.Razorpay(options);\n\n    rzp1.open();\n    }\n\n    \n  render() {\n\n    if(this.state.loggedIn === false) {\n      return <Redirect to=\"/login\"/>\n    }\n\n    return (\n        <div>\n          <Container>\n          <Card style={useStyles.root}>\n          <CardHeader\n            action={\n              null\n            }\n            title={ls.get('destination')}\n            subheader={ ls.get('journeyDate') }\n          />\n          <CardMedia\n            style={useStyles.media}\n            image={img}\n            title=\"trip\"\n          />\n          <CardContent>\n\n          <TextField\n            margin=\"normal\"\n            // onChange={this.onChange}\n            label=\"Pickup Address\"\n            id=\"outlined-size-normal\"\n            // defaultValue={this.state.userName}\n            variant=\"outlined\"\n            name=\"address\"\n          />\n            <br/>\n            <Typography>You driver-partner details</Typography>\n            <Driver \n             name={ls.get('confirmedDriver').name}\n             info={ls.get('confirmedDriver').pricePerKM}\n             price={ls.get('confirmedDriver').price}\n             etc={ls.get('confirmedDriver').lingo}\n            displayButton={false}></Driver>\n          </CardContent>\n          <CardActions disableSpacing>\n            <IconButton aria-label=\"add to favorites\">\n              <FavoriteIcon />\n            </IconButton>\n            <IconButton aria-label=\"share\">\n              <ShareIcon />\n            </IconButton>\n\n            <Button onClick={this.paymentHandler} style={useStyles.expand} size=\"large\" variant=\"contained\" color=\"primary\">\n            Confirm and Book\n          </Button>\n\n          </CardActions>\n        </Card>\n          </Container>\n        </div>\n      );\n  }\n    \n  }"]},"metadata":{},"sourceType":"module"}